Oct-04 22:20:22.802 [main] DEBUG nextflow.cli.Launcher - $> ./nextflow run CrossValidate.nf
Oct-04 22:20:23.228 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 0.25.7
Oct-04 22:20:23.278 [main] INFO  nextflow.cli.CmdRun - Launching `CrossValidate.nf` [disturbed_montalcini] - revision: f53d23b7e0
Oct-04 22:20:23.907 [main] DEBUG nextflow.Session - Session uuid: d21129d9-23fb-4ab0-be31-f9212502e243
Oct-04 22:20:23.908 [main] DEBUG nextflow.Session - Run name: disturbed_montalcini
Oct-04 22:20:23.911 [main] DEBUG nextflow.Session - Executor pool size: 2
Oct-04 22:20:23.931 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 0.25.7 build 4531
  Modified: 06-09-2017 17:25 UTC (19:25 SAST)
  System: Linux 4.10.0-19-generic
  Runtime: Groovy 2.4.11 on OpenJDK 64-Bit Server VM 1.8.0_131-8u131-b11-2ubuntu1.17.04.3-b11
  Encoding: UTF-8 (UTF-8)
  Process: 18543@wpearse-VirtualBox [127.0.1.1]
  CPUs: 1 - Mem: 3.9 GB (1 GB) - Swap: 1.4 GB (1.4 GB)
Oct-04 22:20:24.029 [main] DEBUG nextflow.Session - Work-dir: /home/wpearse/Documents/Nextflow/work [ext2/ext3]
Oct-04 22:20:24.239 [main] DEBUG nextflow.Session - Session start invoked
Oct-04 22:20:24.257 [main] DEBUG nextflow.processor.TaskDispatcher - Dispatcher > start
Oct-04 22:20:24.260 [main] DEBUG nextflow.script.ScriptRunner - > Script parsing
Oct-04 22:20:24.570 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Oct-04 22:20:24.731 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Oct-04 22:20:24.733 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Oct-04 22:20:24.739 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Oct-04 22:20:24.746 [main] INFO  nextflow.executor.Executor - [warm up] executor > local
Oct-04 22:20:24.751 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=1; memory=3.9 GB; capacity=1; pollInterval=100ms; dumpInterval=5m
Oct-04 22:20:24.761 [main] DEBUG nextflow.processor.TaskDispatcher - Starting monitor: LocalPollingMonitor
Oct-04 22:20:24.763 [main] DEBUG n.processor.TaskPollingMonitor - >>> barrier register (monitor: local)
Oct-04 22:20:24.782 [main] DEBUG nextflow.executor.Executor - Invoke register for executor: local
Oct-04 22:20:24.915 [main] WARN  nextflow.processor.TaskProcessor - Input `set` must define at least two component -- Check process `generateFolds`
Oct-04 22:20:24.917 [main] WARN  nextflow.processor.TaskProcessor - Output `set` must define at least two component -- Check process `generateFolds`
Oct-04 22:20:24.984 [main] DEBUG nextflow.Session - >>> barrier register (process: generateFolds)
Oct-04 22:20:25.006 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > generateFolds -- maxForks: 2
Oct-04 22:20:25.076 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Oct-04 22:20:25.077 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Oct-04 22:20:25.078 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Oct-04 22:20:25.079 [main] WARN  nextflow.processor.TaskProcessor - Input `set` must define at least two component -- Check process `associationTest`
Oct-04 22:20:25.080 [main] DEBUG nextflow.Session - >>> barrier register (process: associationTest)
Oct-04 22:20:25.100 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > associationTest -- maxForks: 2
Oct-04 22:20:25.138 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Oct-04 22:20:25.142 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Oct-04 22:20:25.143 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Oct-04 22:20:25.144 [main] DEBUG nextflow.Session - >>> barrier register (process: squeeze)
Oct-04 22:20:25.168 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > squeeze -- maxForks: 2
Oct-04 22:20:25.178 [main] DEBUG nextflow.processor.ProcessFactory - << taskConfig executor: null
Oct-04 22:20:25.182 [main] DEBUG nextflow.processor.ProcessFactory - >> processorType: 'local'
Oct-04 22:20:25.188 [main] DEBUG nextflow.executor.Executor - Initializing executor: local
Oct-04 22:20:25.192 [main] DEBUG nextflow.Session - >>> barrier register (process: makeScoreFile)
Oct-04 22:20:25.216 [main] DEBUG nextflow.processor.TaskProcessor - Creating operator > makeScoreFile -- maxForks: 2
Oct-04 22:20:25.222 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Oct-04 22:20:25.223 [main] DEBUG nextflow.Session - Session await
Oct-04 22:20:25.508 [Task submitter] INFO  nextflow.Session - [87/bf1bfb] Submitted process > generateFolds
Oct-04 22:20:25.932 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: generateFolds; status: COMPLETED; exit: 0; error: -; workDir: /home/wpearse/Documents/Nextflow/work/87/bf1bfbee9cb46ece87a553e3699b9d]
Oct-04 22:20:26.078 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'generateFolds'

Caused by:
  Missing output file(s) `hapmap1Family*.fam` expected by process `generateFolds`

Command executed [/home/wpearse/Documents/Nextflow/templates/kFold.py]:

  #!/usr/bin/env python
  from __future__ import print_function
  import sys
  import subprocess
  from subprocess import call
  import math
  import os
  import logging
  # Called as a template from nextflow
  if len(sys.argv) == 1:
      sys.argv=["kFold.py","hapmap1","10","/home/wpearse/Documents/Nextflow/input"]
  
  from itertools import (takewhile,repeat)
  
  setName = sys.argv[1]
  noFolds = int(sys.argv[2])
  workDir = sys.argv[3]
  
  workPath = os.path.dirname(os.path.realpath(__file__))
  
  def file_len(fname):
      os.chdir(workDir)
      p = subprocess.Popen(['wc', '-l', fname], stdout=subprocess.PIPE,
                                                stderr=subprocess.PIPE)
      result, err = p.communicate()
      if p.returncode != 0:
          raise IOError(err)
      return int(result.strip().split()[0])
  
  fileName = sys.argv[1]+".fam"
  numberOfLines=file_len(fileName)
  
  subsetSize1 = numberOfLines % (noFolds)
  subsetValue1 = int(math.ceil(numberOfLines/float(noFolds)))
  subsetValue2 = int(math.floor(numberOfLines/float(noFolds)))
  lowerbound = 1
  
  for i in range(1,noFolds+1):
      if i <= subsetSize1:
          os.chdir(workDir)
          cmdStr = "sed -n '" + str(lowerbound) + "," + str(lowerbound + subsetValue1 -1) + "p' " + setName + ".fam > " + setName + "Family" + str(i) + ".fam; mv " + setName + "Family" + str(i) + ".fam " + workPath + "/output"
          logging.warning(cmdStr)
          subprocess.call(cmdStr,shell=True)
          lowerbound += subsetValue1
      else:
          cmdStr = "sed -n '" + str(lowerbound) + "," + str(lowerbound + subsetValue2 -1) + "p' " + setName + ".fam > " + setName + "Family" + str(i) + ".fam; mv " + setName + "Family" + str(i) + ".fam " + workPath + "/output"
          os.chdir(workDir)
          subprocess.call(cmdStr,shell=True)
          lowerbound += subsetValue2

Command exit status:
  0

Command output:
  (empty)

Command error:
  WARNING:root:sed -n '1,9p' hapmap1.fam > hapmap1Family1.fam; mv hapmap1Family1.fam output
  WARNING:root:sed -n '10,18p' hapmap1.fam > hapmap1Family2.fam; mv hapmap1Family2.fam output
  WARNING:root:sed -n '19,27p' hapmap1.fam > hapmap1Family3.fam; mv hapmap1Family3.fam output
  WARNING:root:sed -n '28,36p' hapmap1.fam > hapmap1Family4.fam; mv hapmap1Family4.fam output
  WARNING:root:sed -n '37,45p' hapmap1.fam > hapmap1Family5.fam; mv hapmap1Family5.fam output
  WARNING:root:sed -n '46,54p' hapmap1.fam > hapmap1Family6.fam; mv hapmap1Family6.fam output
  WARNING:root:sed -n '55,63p' hapmap1.fam > hapmap1Family7.fam; mv hapmap1Family7.fam output
  WARNING:root:sed -n '64,72p' hapmap1.fam > hapmap1Family8.fam; mv hapmap1Family8.fam output
  WARNING:root:sed -n '73,81p' hapmap1.fam > hapmap1Family9.fam; mv hapmap1Family9.fam output

Work dir:
  /home/wpearse/Documents/Nextflow/work/87/bf1bfbee9cb46ece87a553e3699b9d

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
Oct-04 22:20:26.084 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: generateFolds)
Oct-04 22:20:26.094 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: squeeze)
Oct-04 22:20:26.095 [Actor Thread 2] DEBUG nextflow.Session - <<< barrier arrive (process: makeScoreFile)
Oct-04 22:20:26.098 [Actor Thread 5] DEBUG nextflow.Session - <<< barrier arrive (process: associationTest)
Oct-04 22:20:26.098 [main] DEBUG nextflow.Session - Session await > all process finished
Oct-04 22:20:26.102 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Missing output file(s) `hapmap1Family*.fam` expected by process `generateFolds`
Oct-04 22:20:26.178 [main] DEBUG nextflow.Session - Session await > all barriers passed
Oct-04 22:20:26.186 [Task monitor] DEBUG n.processor.TaskPollingMonitor - <<< barrier arrives (monitor: local)
Oct-04 22:20:26.284 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Oct-04 22:20:26.385 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
